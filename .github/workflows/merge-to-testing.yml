name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions 🚀
on: 
  workflow_dispatch:
    inputs:
      targetBranch:
        description: 'Target Branch'
        required: true
        default: 'testing'
        type: choice
        options:
        - testing
        - live
      force:
        description: 'Force sync (hard reset to main)'
        required: true
        default: true
        type: boolean
jobs:
  manual_merge:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - run: echo "💡 The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "🖥️ The workflow is now ready to test your code on the runner."
      - name: Attempt the merge
        run: |
          git checkout live
          git merge main --ff-only
      - name: Force merge if necessary
        if: failure() and ${{ inputs.force }}
        run: |
          git checkout live
          git reset --hard main
          git push --force
      - name: Push
        run: |
          git push      
      - run: echo "🍏 This job's status is ${{ job.status }}."
